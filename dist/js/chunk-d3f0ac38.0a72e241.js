(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d3f0ac38"],{"51aa":function(e,t,a){},ac79:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"search-bar"},[a("el-form",{staticClass:"fl",attrs:{inline:!0,model:e.searchData}},[a("el-input",{staticStyle:{display:"none"}}),a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{placeholder:"角色名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch()}},model:{value:e.searchData.roleName,callback:function(t){e.$set(e.searchData,"roleName",t)},expression:"searchData.roleName"}})],1)],1),a("div",{staticClass:"fl"},[a("el-button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1),a("div",{staticClass:"tools-bar"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addDepartment}},[e._v("新增角色")])],1),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),a("el-table-column",{attrs:{prop:"id",label:"id",width:"120"}}),a("el-table-column",{attrs:{label:"部门",prop:"groupName"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEditRoleName(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination-bar"},[a("el-pagination",{attrs:{"page-sizes":[10,25,50,100],"page-size":e.pageSize,"current-page":e.pageNumber,layout:"total, sizes, prev, pager, next, jumper",total:e.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNumber=t},"update:current-page":function(t){e.pageNumber=t}}})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"角色名称","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),a("el-form-item",{attrs:{label:"权限集","label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:e.form.rids,callback:function(t){e.$set(e.form,"rids",t)},expression:"form.rids"}},e._l(e.resourceType,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doAdd(e.dialogTitle)}}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("cc57"),a("b449"),a("9666")),o=a("0feb"),s={data:function(){return{resourceType:[],form:{id:"",roleName:"",status:"",roleCode:"",rids:[]},dialogTitle:"新增信息",dialogFormVisible:!1,dialogSize:"large",totalRecord:0,pageSize:10,pageNumber:1,dialogVisible:!1,searchData:{roleName:""},roleForm:{id:"",roleName:"",permissions:"",roleCode:"",roleType:"",status:""},roleTree:[],tableData:[]}},created:function(){this.loadData(),this.getQeryResource()},methods:{getQeryResource:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["r"])();case 2:for(a in t=e.sent,t.data)this.resourceType.push({id:t.data[a].id,name:t.data[a].name});case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addDepartment:function(){this.dialogFormVisible=!0,this.dialogTitle="新增信息"},loadData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o["i"])();case 3:t=e.sent,this.tableData=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),doAdd:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("新增信息"!==t){e.next=18;break}if(!(""===this.form.roleName||this.form.rids.length<=0)){e.next=4;break}return this.$message.warning("请完善新增信息！"),e.abrupt("return");case 4:return a={data:{groupName:this.form.roleName,rids:this.form.rids}},e.prev=5,e.next=8,Object(o["b"])(a);case 8:r=e.sent,this.$message.success(r.msg),this.dialogFormVisible=!1,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](5),console.log(e.t0);case 16:e.next=28;break;case 18:if("编辑信息"!==t){e.next=28;break}if(!(""===this.form.roleName||this.form.rids.length<=0)){e.next=22;break}return this.$message.warning("请完善编辑信息！"),e.abrupt("return");case 22:return i={data:{id:this.form.id,groupName:this.form.roleName,rids:this.form.rids}},e.next=25,Object(o["u"])(i);case 25:n=e.sent,this.delFormKey(),this.$message.success(n.msg);case 28:this.loadData(),this.dialogFormVisible=!1;case 30:case"end":return e.stop()}}),e,this,[[5,13]])})));function t(t){return e.apply(this,arguments)}return t}(),getTreeIndexByRootRoleId:function(e){var t,a=this.roleTree.length;for(t=0;t<a;t++)if(this.roleTree[t].id===e)return t},handleSizeChange:function(e){this.pageSize=e,this.onSearch()},handleCurrentChange:function(e){this.onSearch({pageNumber:e})},handleReset:function(){this.searchData={roleName:""},this.onSearch()},onSearch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.pageNumber;Object(o["m"])().then((function(t){e.tableData=t||[]}))},handleDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{id:a.id}},console.log(a.id),e.next=4,Object(o["g"])(r);case 4:i=e.sent,this.$message.success(i.msg),this.loadData();case 7:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),delFormKey:function(){for(var e in this.form)this.form[e]="rids"===e?[]:""},handleEditRoleName:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(a),this.form.roleName=a.groupName,this.form.id=a.id,this.dialogTitle="编辑信息",this.dialogFormVisible=!0;case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},watch:{dialogFormVisible:function(){this.dialogFormVisible||this.delFormKey()}}},l=s,c=(a("cd24"),a("9ca4")),u=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=u.exports},cd24:function(e,t,a){"use strict";var r=a("51aa"),i=a.n(r);i.a}}]);
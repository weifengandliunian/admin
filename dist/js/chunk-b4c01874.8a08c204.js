(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b4c01874"],{"1e00":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"search-bar"},[a("el-form",{staticClass:"fl",attrs:{inline:!0,model:t.searchData}},[a("el-input",{staticStyle:{display:"none"}}),a("el-form-item",{attrs:{label:"登录名称"}},[a("el-input",{attrs:{placeholder:"登录名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch()}},model:{value:t.searchData.loginName,callback:function(e){t.$set(t.searchData,"loginName",e)},expression:"searchData.loginName"}})],1)],1),a("div",{staticClass:"fl"},[a("el-button",{attrs:{type:"text"},on:{click:t.handleReset}},[t._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")])],1)],1),a("div",{staticClass:"tools-bar"},t._l(t.dialogList,(function(e,r){return a("el-button",{key:r,attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.dialogItem(r)}}},[t._v(t._s(e.name))])})),1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.tableLoading,expression:"tableLoading",modifiers:{body:!0}}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),a("el-table-column",{attrs:{prop:"status",label:"停用/启用",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"","inactive-text":""},on:{change:function(a){return t.handleStatus(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{prop:"id","min-width":"200",label:"ID"}}),a("el-table-column",{attrs:{prop:"parentId","min-width":"200",label:"上级ID"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名","min-width":"120"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"120"}}),a("el-table-column",{attrs:{prop:"groupName","min-width":"210",label:"角色组"}}),a("el-table-column",{attrs:{prop:"itemNames",width:"250",label:"项目名称"}}),a("el-table-column",{attrs:{prop:"updateDate",label:"更新日期",formatter:t.toDateTime,width:"180"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleResetPwd(e.$index,e.row)}}},[t._v("重置密码")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDel(e.$index,e.row)}}},[t._v("删除")])],1)]}}])})],1),a("div",{staticClass:"pagination-bar"},[a("el-pagination",{attrs:{"page-sizes":[10,25,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalRecord},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){return t.onDialogClose()}}},[a("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.dataForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"loginName"}},["修改用户信息"==t.dialogTitle?[a("div",{staticStyle:{border:"1px solid #DCDFE6","border-radius":"4px",padding:"0 15px"}},[t._v("\n                        "+t._s(t.dataForm.loginName)+"\n                    ")])]:a("el-input",{attrs:{placeholder:"用户名",disabled:t.isResetPwd},model:{value:t.dataForm.loginName,callback:function(e){t.$set(t.dataForm,"loginName",e)},expression:"dataForm.loginName"}})],2),"新增用户信息"==t.dialogTitle||"修改用户信息"==t.dialogTitle?a("el-form-item",{attrs:{label:"角色组"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dataForm.groupId,callback:function(e){t.$set(t.dataForm,"groupId",e)},expression:"dataForm.groupId"}},t._l(t.department,(function(t){return a("el-option",{key:t.id,attrs:{label:t.groupName,value:t.id}})})),1)],1):t._e(),"新增用户信息"==t.dialogTitle||"修改用户信息"==t.dialogTitle?a("el-form-item",{attrs:{label:"项目组"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.dataForm.iids,callback:function(e){t.$set(t.dataForm,"iids",e)},expression:"dataForm.iids"}},t._l(t.projectList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.itemName,value:t.id}})})),1)],1):t._e(),"新增用户信息"==t.dialogTitle||"重置密码"==t.dialogTitle?a("el-form-item",{attrs:{label:"重置密码"==t.dialogTitle?"重置密码":"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"密码"},model:{value:t.dataForm.password,callback:function(e){t.$set(t.dataForm,"password",e)},expression:"dataForm.password"}})],1):t._e(),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"手机号",disabled:t.isResetPwd},model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,"phone",e)},expression:"dataForm.phone"}})],1),"新增用户信息"==t.dialogTitle||"修改用户信息"==t.dialogTitle?a("el-form-item",{attrs:{label:"上级Id",prop:"parentId"}},[a("el-input",{attrs:{placeholder:"上级Id"},model:{value:t.dataForm.parentId,callback:function(e){t.$set(t.dataForm,"parentId",e)},expression:"dataForm.parentId"}})],1):t._e(),"新增用户信息"==t.dialogTitle||"修改用户信息"==t.dialogTitle?a("el-form-item",{attrs:{label:"停用/启用",prop:"statusId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.dataForm.statusId,callback:function(e){t.$set(t.dataForm,"statusId",e)},expression:"dataForm.statusId"}},t._l(t.isEmploy,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1):t._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),"修改用户信息"==t.dialogTitle?a("el-button",{attrs:{type:"info"},on:{click:function(e){return t.onDialogSubmit(1)}}},[t._v("保存")]):"新增用户信息"==t.dialogTitle?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onDialogSubmit(2)}}},[t._v("立即创建")]):a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onDialogSubmit(3)}}},[t._v("重置密码")])],1)],1)],1)},i=[],n=(a("6d57"),a("b449"),a("9666")),s=a("0feb"),o=a("35f4"),l=a.n(o),d={data:function(){return{userInfo:null,totalRecord:0,pageSize:10,tableLoading:!1,dialogVisible:!1,dialogTitle:"新增用户信息",dialogList:[{name:"新增用户"},{name:"导出数据"}],roles:[{id:1,roleName:"启用"},{id:0,roleName:"停用"}],department:[],projectList:[],isEmploy:[{id:0,name:"停用"},{id:1,name:"启用"}],rules:{loginName:[{required:!0,message:"登录名不能为空",trigger:"blur"},{min:1,max:50,message:"登录名长度在 1 到 50 个字符",trigger:"blur"}],name:[{required:!0,message:"真实姓名不能为空",trigger:"blur"},{min:1,max:20,message:"真实姓名长度在 1 到 20 个字符",trigger:"blur"}],mobile:[{required:!0,message:"联系电话不能为空",trigger:"blur"},{pattern:/^(13|15|18|14|17)[0-9]{9}$/,message:"手机号码格式不正确",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur, change"}]},searchData:{loginName:""},dataForm:{id:"",loginName:"",password:"",phone:"",statusId:"",parentId:"",iids:[],groupId:""},tableData:[],isResetPwd:!1}},created:function(){this.userInfo=JSON.parse(localStorage.getItem("userInfo")).userInfo,this.getDepartmentInfo(),this.initList(),this.getProInfo()},methods:{dialogItem:function(t){switch(t){case 0:this.resetDataFormKey(),this.dialogVisible=!this.dialogVisible,this.dialogTitle="新增用户信息";break;case 1:alert("刷新数据");break;case 2:alert("导出数据");break}},getProInfo:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["l"])();case 2:e=t.sent,this.projectList=e.data;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDepartmentInfo:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["i"])();case 3:e=t.sent,this.department=e.data,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),initList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={data:{pageNum:"1",pageSize:"10"}},t.next=3,Object(s["n"])(e);case 3:a=t.sent,this.tableData=a.data.list;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleStatus:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={data:{id:e.id,status:e.status,phone:e.phone}},t.prev=1,t.next=4,Object(s["o"])(a);case 4:r=t.sent,this.$message.success(r.msg),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(e){return t.apply(this,arguments)}return e}(),statusFormat:function(t,e,a){return{0:"停用",1:"启用"}[a]||""},onDialogClose:function(){this.$refs.dataForm.resetFields()},handleSizeChange:function(t){this.pageSize=t,this.onSearch()},handleCurrentChange:function(t){this.onSearch({pageNumber:t})},handleReset:function(){this.searchData={loginName:""},this.onSearch()},onSearch:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.pageNumber},toDateTime:function(t,e,a){return a?l()(a).format("YYYY-MM-DD HH:mm:ss"):""},handleChangeStatus:function(t,e){},handleResetPwd:function(t,e){this.isResetPwd=!0,this.dataForm.id=e.id,this.dataForm.loginName=e.username,this.dataForm.phone=e.phone,this.dialogTitle="重置密码",this.dialogVisible=!0},handleDel:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e,a){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={data:{id:a.id,phone:a.phone}},t.prev=1,t.next=4,Object(s["h"])(r);case 4:i=t.sent,this.$message.success(i.msg),this.initList(),t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](1);case 11:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(e,a){return t.apply(this,arguments)}return e}(),handleEdit:function(t,e){this.dialogVisible=!0,this.dialogTitle="修改用户信息",this.dataForm.loginName=e.username,this.dataForm.id=e.id,this.dataForm.groupId=e.groupId,this.dataForm.parentId=e.parentId,this.dataForm.phone=e.phone,this.dataForm.statusId=e.status},resetDataFormKey:function(){for(var t in this.dataForm)this.dataForm[t]="iids"===t?[]:""},onDialogSubmit:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,r,i,n,o,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1!==e){t.next=17;break}if(console.log(this.dataForm),!(""===this.dataForm.parentId||""===this.dataForm.statusId||""===this.dataForm.loginName||""===this.dataForm.phone||this.dataForm.iids.length<=0||""===this.dataForm.groupId)){t.next=5;break}return this.$message.warning("请完善编辑信息！"),t.abrupt("return");case 5:return a={data:{parentId:this.dataForm.parentId,id:this.dataForm.id,status:this.dataForm.statusId,username:this.dataForm.loginName,groupId:this.dataForm.groupId,iids:this.dataForm.iids,phone:this.dataForm.phone}},t.prev=6,t.next=9,Object(s["j"])(a);case 9:r=t.sent,this.$message.success(r.msg),t.next=15;break;case 13:t.prev=13,t.t0=t["catch"](6);case 15:t.next=48;break;case 17:if(2!==e){t.next=34;break}t.t1=regeneratorRuntime.keys(this.dataForm);case 19:if((t.t2=t.t1()).done){t.next=27;break}if(i=t.t2.value,"id"===i||"iids"===i){t.next=25;break}if(""!==this.dataForm[i]){t.next=25;break}return this.$message.warning("请完善新增信息！"),t.abrupt("return");case 25:t.next=19;break;case 27:if(!(this.dataForm.iids.length<=0)){t.next=30;break}return this.$message.warning("请选择项目组！"),t.abrupt("return");case 30:a={data:{username:this.dataForm.loginName,phone:this.dataForm.phone,password:this.dataForm.password,parentId:this.dataForm.parentId,status:this.dataForm.statusId,groupId:this.dataForm.groupId,iids:this.dataForm.iids}};try{n=Object(s["d"])(a),this.$message.success(n.msg)}catch(d){}t.next=48;break;case 34:if(""!==this.dataForm.id&&""!==this.dataForm.phone&&""!==this.dataForm.password){t.next=37;break}return this.$message.warning("编辑内容不能为空！"),t.abrupt("return");case 37:return a={data:{id:this.dataForm.id,phone:this.dataForm.phone,password:this.dataForm.password}},t.prev=38,t.next=41,Object(s["s"])(a);case 41:o=t.sent,this.isResetPwd=!1,this.$message.success(o.msg),t.next=48;break;case 46:t.prev=46,t.t3=t["catch"](38);case 48:setTimeout((function(){l.initList()}),500),this.resetDataFormKey(),this.dialogVisible=!1;case 51:case"end":return t.stop()}}),t,this,[[6,13],[38,46]])})));function e(e){return t.apply(this,arguments)}return e}()},watch:{dialogVisible:function(){!1===this.dialogVisible&&(this.isResetPwd=!1)}}},c=d,u=(a("5fa2"),a("9624"),a("9ca4")),m=Object(u["a"])(c,r,i,!1,null,null,null);e["default"]=m.exports},"5fa2":function(t,e,a){"use strict";var r=a("fe95"),i=a.n(r);i.a},"69dc":function(t,e,a){},9624:function(t,e,a){"use strict";var r=a("69dc"),i=a.n(r);i.a},fe95:function(t,e,a){}}]);
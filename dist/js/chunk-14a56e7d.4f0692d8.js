(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14a56e7d"],{"0fb9":function(e,t,a){"use strict";var r=a("43e1"),o=a.n(r);o.a},"1f14":function(e,t,a){"use strict";var r=a("e714"),o=a.n(r);o.a},"43e1":function(e,t,a){},d644:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("search"),a("div",{staticClass:"tools-bar"},[a("el-button",{attrs:{type:"success",icon:"el-icon-plus",size:"small"},on:{click:e.addProject}},[e._v("新建项目")])],1),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:e.projectInfo,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),a("el-table-column",{attrs:{prop:"id",label:"id",width:"120"}}),a("el-table-column",{attrs:{label:"项目名称",prop:"itemName"}}),a("el-table-column",{attrs:{label:"项目状态",prop:"itemStatus"}}),a("el-table-column",{attrs:{label:"施工单位",prop:"constructionUnit"}}),a("el-table-column",{attrs:{label:"施工地址",prop:"constructionAddress"}}),a("el-table-column",{attrs:{label:"结束日期",prop:"endDay"}}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleEditRoleName(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination-bar"},[a("el-pagination",{attrs:{"page-sizes":[10,25,50,100],"page-size":e.pageSize,"current-page":e.pageNumber,layout:"total, sizes, prev, pager, next, jumper",total:e.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.pageNumber=t},"update:current-page":function(t){e.pageNumber=t}}})],1)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.addProjectForm}},[a("el-form-item",{attrs:{label:"项目名称","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.addProjectForm.itemName,callback:function(t){e.$set(e.addProjectForm,"itemName",t)},expression:"addProjectForm.itemName"}})],1),a("el-form-item",{attrs:{label:"项目状态","label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.addProjectForm.itemStatusId,callback:function(t){e.$set(e.addProjectForm,"itemStatusId",t)},expression:"addProjectForm.itemStatusId"}},e._l(e.projectStatus,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"施工单位","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.addProjectForm.constructionUnit,callback:function(t){e.$set(e.addProjectForm,"constructionUnit",t)},expression:"addProjectForm.constructionUnit"}})],1),a("el-form-item",{attrs:{label:"施工地址","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.addProjectForm.constructionAddress,callback:function(t){e.$set(e.addProjectForm,"constructionAddress",t)},expression:"addProjectForm.constructionAddress"}})],1),a("el-form-item",{attrs:{label:"施工概况","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.addProjectForm.generalSituation,callback:function(t){e.$set(e.addProjectForm,"generalSituation",t)},expression:"addProjectForm.generalSituation"}})],1),a("el-form-item",{attrs:{label:"开始时间","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:e.getTodayDate},model:{value:e.addProjectForm.startDay,callback:function(t){e.$set(e.addProjectForm,"startDay",t)},expression:"addProjectForm.startDay"}})],1),a("el-form-item",{attrs:{label:"结束时间","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:e.getTodayDate},model:{value:e.addProjectForm.endDay,callback:function(t){e.$set(e.addProjectForm,"endDay",t)},expression:"addProjectForm.endDay"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入"},model:{value:e.addProjectForm.remark,callback:function(t){e.$set(e.addProjectForm,"remark",t)},expression:"addProjectForm.remark"}})],1),a("el-form-item",{attrs:{label:"附件/图片","label-width":"120px"}},[a("el-upload",{attrs:{action:e.uploadUrl,"list-type":"picture-card",accept:"image/png,image/jpeg","auto-upload":!0,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doAdd(e.dialogTitle)}}},[e._v("确 定")])],1)],1)],1)},o=[],n=(a("6d57"),a("b449"),a("9666")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-bar"},[a("el-form",{staticClass:"fl",attrs:{inline:!0,model:e.searchData}},[a("el-input",{staticStyle:{display:"none"}}),a("el-form-item",{attrs:{label:"登录名称"}},[a("el-input",{attrs:{placeholder:"登录名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch()}},model:{value:e.searchData.loginName,callback:function(t){e.$set(e.searchData,"loginName",t)},expression:"searchData.loginName"}})],1)],1),a("div",{staticClass:"fl"},[a("el-button",{attrs:{type:"text"},on:{click:e.handleReset}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1)],1)])},l=[],s={data:function(){return{searchData:{loginName:""}}},methods:{handleReset:function(){this.searchData={loginName:""},this.onSearch()},onSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.pageNumber}}},c=s,d=(a("0fb9"),a("9ca4")),u=Object(d["a"])(c,i,l,!1,null,"6cf5bacc",null),m=u.exports,p=a("0feb"),h=a("6e40"),f={data:function(){return{pageSize:10,pageNumber:1,totalRecord:0,projectInfo:[],dialogFormVisible:!1,dialogTitle:"新增项目",projectStatus:[{id:1,name:"准备中"},{id:2,name:"在建中"},{id:3,name:"已完成"}],addProjectForm:{itemName:"",itemStatusId:"",startDay:"",endDay:"",constructionUnit:"",constructionAddress:"",generalSituation:"",accessory:"",remark:""},dialogImageUrl:"",uploadUrl:h["a"]+"/file/upload",dialogVisible:!1}},computed:{getTodayDate:function(){return"例如：".concat(this.$moment(new Date).format("YYYY-MM-DD")," 格式")}},components:{search:m},created:function(){this.getProjectInfo()},methods:{getProjectInfo:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["k"])();case 2:t=e.sent,this.projectInfo=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addProject:function(){this.dialogTitle="新增项目",this.resetFormKey(),this.dialogFormVisible=!this.dialogFormVisible},handleSuccess:function(e,t,a){this.addProjectForm.accessory+=""==this.addProjectForm.accessory?e.data.fileName:",".concat(e.data.fileName)},handleRemove:function(e,t){if(this.addProjectForm.accessory="",t.length>0)for(var a=0;a<t.length;a++)this.addProjectForm.accessory+=1==t.length?t[a].response.data.fileName:",".concat(t[a].response.data.fileName);else this.addProjectForm.accessory=""},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleError:function(e,t,a){console.log(e)},resetFormKey:function(){for(var e in this.addProjectForm)this.addProjectForm[e]=""},doAdd:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t),"新增项目"!==t){e.next=15;break}e.t0=regeneratorRuntime.keys(this.addProjectForm);case 3:if((e.t1=e.t0()).done){e.next=10;break}if(a=e.t1.value,""!=this.addProjectForm[a]){e.next=8;break}return this.$message.warning("请完善新增信息"),e.abrupt("return");case 8:e.next=3;break;case 10:return r={data:{itemName:this.addProjectForm.itemName,itemStatus:this.addProjectForm.itemStatusId,startDay:this.addProjectForm.startDay,endDay:this.addProjectForm.endDay,constructionUnit:this.addProjectForm.constructionUnit,constructionAddress:this.addProjectForm.constructionAddress,generalSituation:this.addProjectForm.generalSituation,remark:this.addProjectForm.remark,accessory:this.addProjectForm.accessory}},e.next=13,Object(p["a"])(r);case 13:o=e.sent,200===o.status&&(this.$message.success(o.msg),this.getProjectInfo(),this.resetFormKey(),this.dialogFormVisible=!1);case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={data:{id:a.id}},e.next=3,Object(p["e"])(r);case 3:o=e.sent,200===o.status&&(this.$message.success(o.msg),this.getProjectInfo());case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleEditRoleName:function(e,t){this.dialogTitle="编辑项目",this.dialogFormVisible=!this.dialogFormVisible},handleSizeChange:function(e){this.pageSize=e,this.onSearch()},handleCurrentChange:function(e){this.onSearch({pageNumber:e})}}},b=f,g=(a("1f14"),Object(d["a"])(b,r,o,!1,null,"81f87120",null));t["default"]=g.exports},e714:function(e,t,a){}}]);